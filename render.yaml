services:
  - type: web
    name: flask-app
    env: python
    plan: free
    region: oregon
    autoDeploy: true

    buildCommand: |
      pip install --upgrade pip
      pip install .

    startCommand: |
      gunicorn -c gunicorn.conf.py wsgi:app

    envVars:
      - key: SECRET_KEY
        generateValue: true
      # Optional tuning via Gunicorn envs; uncomment and adjust as needed
      # - key: GUNICORN_WORKERS
      #   value: "3"
      # - key: GUNICORN_THREADS
      #   value: "1"
      # - key: GUNICORN_TIMEOUT
      #   value: "60"

    healthCheckPath: /api/health
    healthCheckTimeout: 30
